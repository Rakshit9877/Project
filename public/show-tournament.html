<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.3/angular.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script>
        var module = angular.module("kuchModule", []);
        var controller = module.controller("kuchController", function ($scope, $http) {
            $scope.doFetchAll = function () {
                // alert()
                let url = "/fetch-all-users";
                $http.get(url).then(done, fail);
                function done(response) {
                    // alert(JSON.stringify(response.data));
                    $scope.jsonArray = response.data;
                }
                function fail(err) {
                    alert(err.data);
                }
            }
            $scope.showSelCities = function () {
                let url = "/fetch-cities";
                $http.get(url).then(done, fail);
                function done(response) {
                    // alert(JSON.stringify(response.data));
                    $scope.jsonArrayc = response.data;

                }
                function fail(err) {
                    alert(err.data)
                }
            }
            $scope.showSelGames = function () {
                let url = "/fetch-games";
                $http.get(url).then(done, fail);
                function done(response) {
                    // alert(JSON.stringify(response.data));
                    $scope.jsonArrayb = response.data;
                }
                function fail(err) {
                    alert(err.data)
                }
            }
            $scope.showSelRecords = function () {
                // alert($scope.selCity) 
                let url = "/fetch-records?city=" + $scope.selCity + "&game=" + $scope.selGame;
                $http.get(url).then(done, fail);
                function done(response) {
                    // alert(JSON.stringify(response.data));
                    $scope.jsonArray = response.data;
                }
                function fail(err) {
                    alert(err.data)
                }
            }
            $scope.doFetchOne = function (index) {
                // alert(JSON.stringify($scope.jsonArray[index]))
                $scope.selObj = $scope.jsonArray[index];
            }

        });
    </script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f7f9fc;
            color: #333;
            margin: 0;
            padding: 0;
        }

        h1 {
            font-size: 24px;
            color: #4a90e2;
            margin: 20px 0;
            text-transform: uppercase;
        }

        hr {
            border: 1px solid #ccc;
            width: 80%;
            margin: 20px auto;
        }

        select {
            width: 200px;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 4px;
            background-color: #fff;
            font-size: 14px;
            color: #333;
            cursor: pointer;
        }

        select:focus {
            outline: none;
            border-color: #4a90e2;
            box-shadow: 0 0 5px rgba(74, 144, 226, 0.5);
        }

        input[type="button"] {
            background-color: #4a90e2;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            /* transition: background-color 0.3s ease; */
            margin: 5px;
        }

        input[type="button"]:hover {
            background-color: #357ab7;
        }

        .container {
            margin: 20px auto;
            padding: 20px;
            max-width: 1200px;
        }

        .row {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
        }

        .card {
            background-color: #ffffff;
            border: 1px solid #ccc;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 15px;
            text-align: center;
            width: 260px;
            margin: 10px;
            /* transition: transform 0.2s ease, box-shadow 0.2s ease; */
        }

        /* .card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
} */

        .card img {
            border-radius: 4px;
            margin-bottom: 10px;
        }

        .card-title {
            font-size: 14px;
            color: #555;
            margin: 5px 0;
            font-weight: bold;
        }

        .card button {
            background-color: #4a90e2;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            /* transition: background-color 0.3s ease; */
        }

        .card button:hover {
            background-color: #357ab7;
        }

        .modal-content {
            background-color: #ffffff;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .modal-header {
            border-bottom: 1px solid #ccc;
            padding-bottom: 10px;
        }

        .modal-title {
            font-size: 18px;
            color: #4a90e2;
            font-weight: bold;
        }

        .modal-body {
            padding: 20px;
            text-align: center;
        }

        .modal-body img {
            max-width: 100%;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .modal-footer {
            border-top: 1px solid #ccc;
            padding-top: 10px;
            text-align: right;
        }

        .modal-footer button {
            background-color: #4a90e2;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            /* transition: background-color 0.3s ease; */
        }

        .modal-footer button:hover {
            background-color: #357ab7;
        }
    </style>
</head>

<body ng-app="kuchModule" ng-controller="kuchController" ng-init="showSelCities(); showSelGames();">
    <center> <h1 style="border: 2px grey solid; border-radius: 6px; width: 400px; box-shadow: 2px; margin-top: 10px;">Find Tournaments</h1></center> 
    <center>
        <div class="container">
            <div class="row" style="display: flex;">
                <!-- fill cities select -->
                <!-- <input type="button" value="Fill Cities" ng-click="showSelCities();" class="btn btn-primary"> -->
                <div class="col-md-6">
                    <h3>Select City</h3>
                    <select ng-model="selCity" name="selcity">
                        <option value="none"> select</option>
                        <option ng-repeat="boxObj in jsonArrayc" value="{{boxObj.city}}">{{boxObj.city}}</option>
                    </select> <br><br>
                </div>

                <!-- fill games select -->
                <!-- <input type="button" value="Fill Games" ng-click="showSelGames();" class="btn btn-primary"> -->
                <div class="col-md-6">
                    <h3>Select Games</h3>
                    <select ng-model="selGame" name="selgame">
                        <option value="none">Select</option>
                        <option ng-repeat="boxObj in jsonArrayb" value="{{boxObj.game}}">{{boxObj.game}}</option>
                    </select>
                </div>
            </div>
        </div> <br><br>


        <!-- =================== -->
        <input type="button" value="fetch selected Records" ng-click="showSelRecords();">



        <!-- ================= -->
        <h1>CARDS</h1>
        <hr>
        <input type="button" value="Fetch All Records" ng-click="doFetchAll();">
        <hr>

        <div class="container">
            <div class="row">
                <div class="col-md-3" ng-repeat="boxObj in jsonArray">
                    <div class="card">
                        <center> <img src="{{boxObj.poster}}" width="100" height="100" alt=""> </center>
                        <div class="card-body">
                            <h5 class="card-title">{{boxObj.emailid}}</h5>
                            <h5 class="card-title">{{boxObj.game}}</h5>
                            <h5 class="card-title">{{boxObj.title}}</h5>
                            <h5 class="card-title">{{boxObj.fee}}</h5>
                            <h5 class="card-title">{{boxObj.dot}}</h5>
                            <h5 class="card-title">{{boxObj.city}}</h5>
                            <h5 class="card-title">{{boxObj.location}}</h5>
                            <h5 class="card-title">{{boxObj.prizes}}</h5>

                            <h5 class="card-title">{{boxObj.info}}</h5>
                            <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                                data-bs-target="#modal1" ng-click="doFetchOne($index);">
                                Details
                            </button>

                        </div>
                    </div>
                </div>
            </div>
        </div>



        <!-- modal -->
        <!-- Button trigger modal -->


        <!-- Modal -->
        <div class="modal fade" id="modal1" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p>
                            <img src="{{selObj.poster}}" alt="">
                            {{selObj.title}}
                        </p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
                    </div>
                </div>
            </div>
        </div>




    </center>


</body>

</html>